{% extends "base1.html" %}
{% block title %}Meeting: {{ meeting.name }}{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold">{{ meeting.name }}</h1>
  <p><strong>Bot:</strong> {{ meeting.bot_name }}</p>
  <p><strong>Join Time:</strong> {{ meeting.join_time }}</p>

  <div class="meeting-grid mt-6">
    <!-- Transcript section -->
    <div class="transcript-container">
      <h2 class="text-xl font-semibold mb-2">Transcript</h2>
      <div class="transcript-box">
        {% for seg in segments %}
          <div class="mb-4">
            {% if seg.speaker %}
              <p class="font-semibold text-blue-600">{{ seg.speaker }}:</p>
            {% endif %}
            <p class="mt-1 whitespace-pre-wrap">{{ seg.text }}</p>
            <p class="text-xs text-gray-600 mt-1">{{ seg.created }}</p>
          </div>
        {% empty %}
          <p>No transcript yet.</p>
        {% endfor %}
      </div>

      <form method="POST" action="{% url 'transcribe_meeting' meeting.id %}">
        {% csrf_token %}
        <button type="submit" class="transcribe-btn">
          üìù Generate Transcript
        </button>
      </form>
    </div>

    <!-- Screenshots/Slides section -->
    <div class="slides-container">
      <h2 class="text-xl font-semibold mb-2">Slides</h2>
      {% for shot in screenshots %}
        <img src="/{{ shot.image_path }}" alt="Screenshot at {{ shot.created }}">
      {% empty %}
        <p>No screenshots yet.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
